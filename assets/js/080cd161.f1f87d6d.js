"use strict";(self.webpackChunkroosevelt_advisors_website=self.webpackChunkroosevelt_advisors_website||[]).push([[9854],{13929:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/mcp-70674788784fd9dba658f0575ab136b3.png"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(96540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}},54816:e=>{e.exports=JSON.parse('{"permalink":"/blog/fastapi-mcp-client","source":"@site/blog/2025-04-14-fastapi-mcp-client/index.mdx","title":"Supporting SSE for Model Context Protocol (MCP) in Python - Introducing fastapi-mcp-client","description":"I\'ve been working on a project to support SSE for MCP. Couldn\'t find any good example on the client in Python for supporting SSE with FastAPI MCP. So I wrote it up myself and thought I will share everyone. Hope everyone find it useful.","date":"2025-04-14T00:00:00.000Z","tags":[{"inline":false,"label":"Python","permalink":"/blog/tags/tags/python","description":"Articles about Python programming"},{"inline":false,"label":"SSE","permalink":"/blog/tags/tags/sse","description":"Server-Sent Events (SSE) implementation and usage"},{"inline":false,"label":"FastAPI","permalink":"/blog/tags/tags/fastapi","description":"Content related to the FastAPI framework"},{"inline":false,"label":"MCP","permalink":"/blog/tags/tags/mcp","description":"Model Context Protocol (MCP) content"},{"inline":false,"label":"AI","permalink":"/blog/tags/tags/ai","description":"Articles about artificial intelligence and machine learning"}],"readingTime":2.77,"hasTruncateMarker":true,"authors":[{"name":"Jon Roosevelt","title":"Consultant","url":"https://jonroosevelt.com","page":{"permalink":"/blog/authors/all-jon-roosevelt-articles"},"socials":{"linkedin":"https://www.linkedin.com/in/jonroosevelt/","github":"https://github.com/RooseveltAdvisors"},"imageURL":"https://github.com/RooseveltAdvisors.png","key":"jon"}],"frontMatter":{"slug":"fastapi-mcp-client","title":"Supporting SSE for Model Context Protocol (MCP) in Python - Introducing fastapi-mcp-client","authors":["jon"],"tags":["python","sse","fastapi","mcp","ai"],"image":"/img/blog/2025-04-14-fastapi-mcp-client/hero-banner.jpg"},"unlisted":false,"prevItem":{"title":"Building an AI Analysis Agent in Hours - A No-Code Approach with Lovable and N8N","permalink":"/blog/building-aoa-agent-lovable-n8n"},"nextItem":{"title":"Architecting Extensible AI Agents - A Modular Core with Pluggable Skills and SSE Communication","permalink":"/blog/architecting-modular-ai-agents"}}')},83135:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var s=t(54816),i=t(74848),o=t(28453);const r={slug:"fastapi-mcp-client",title:"Supporting SSE for Model Context Protocol (MCP) in Python - Introducing fastapi-mcp-client",authors:["jon"],tags:["python","sse","fastapi","mcp","ai"],image:"/img/blog/2025-04-14-fastapi-mcp-client/hero-banner.jpg"},a="What is the Model Context Protocol?",l={authorsImageUrls:[void 0]},c=[];function p(e){const n={a:"a",code:"code",h1:"h1",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"I've been working on a project to support SSE for MCP. Couldn't find any good example on the client in Python for supporting SSE with FastAPI MCP. So I wrote it up myself and thought I will share everyone. Hope everyone find it useful."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"MCP overview",src:t(13929).A+"",width:"2752",height:"1536"})}),"\n","\n",(0,i.jsx)(n.p,{children:"Model Context Protocol (MCP) is an emerging standard for communication between\napplications and AI models or services. It provides a structured way to:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Establish a session"})," between client and server"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Call model-powered tools"})," with parameters"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Process streaming results"})," in a standardized format"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Maintain context"})," across multiple interactions"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This protocol is particularly valuable for applications that need to interact with AI services while\nsupporting streaming responses - a pattern that's becoming increasingly common as models\ngenerate content incrementally."}),"\n",(0,i.jsx)(n.h1,{id:"the-mcp-flow-how-it-works",children:"The MCP Flow: How It Works"}),"\n",(0,i.jsx)(n.p,{children:"MCP over Server-Sent Events (SSE) creates a robust pattern for streaming AI responses:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        \u2502  1. GET /mcp (SSE connection)     \u2502        \u2502\n\u2502        \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502        \u2502\n\u2502        \u2502                                   \u2502        \u2502\n\u2502        \u2502  2. SSE: session_id=XXX           \u2502        \u2502\n\u2502        \u2502 \u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502        \u2502\n\u2502        \u2502                                   \u2502        \u2502\n\u2502        \u2502  3. POST /mcp/messages/?session_id\u2502        \u2502\n\u2502 Client \u2502    {method: "initialize"}         \u2502 Server \u2502\n\u2502        \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502        \u2502\n\u2502        \u2502                                   \u2502        \u2502\n\u2502        \u2502  4. POST /mcp/messages/?session_id\u2502        \u2502\n\u2502        \u2502    {method: "tools/call", ...}    \u2502        \u2502\n\u2502        \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502        \u2502\n\u2502        \u2502                                   \u2502        \u2502\n\u2502        \u2502  5. SSE: streamed results         \u2502        \u2502\n\u2502        \u2502 \u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,i.jsx)(n.p,{children:"This pattern allows for efficient, one-way streaming from server to client with a persistent\nconnection, ideal for AI-generated content."}),"\n",(0,i.jsx)(n.h1,{id:"the-gap-in-the-python-ecosystem",children:"The Gap in the Python Ecosystem"}),"\n",(0,i.jsx)(n.p,{children:"While FastAPI supports SSE and the MCP server implementation exists, there was a significant\ngap:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No dedicated Python client libraries for MCP over SSE"}),"\n",(0,i.jsx)(n.li,{children:"Challenges in maintaining session state across requests"}),"\n",(0,i.jsx)(n.li,{children:"Lack of examples showing proper error handling for stream interruptions"}),"\n",(0,i.jsx)(n.li,{children:"No standardized approach for processing the streamed events"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"These gaps meant developers had to implement complex, error-prone boilerplate code to\ninteract with MCP servers."}),"\n",(0,i.jsx)(n.h1,{id:"introducing-fastapi-mcp-client",children:"Introducing fastapi-mcp-client"}),"\n",(0,i.jsx)(n.p,{children:"The fastapi-mcp-client library solves these problems with a clean, async-first API that\nhandles all the complexities of the MCP protocol:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import asyncio\nfrom fastapi_mcp_client import MCPClient\n\nasync def main():\n    async with MCPClient("http://localhost:8000") as client:\n        # Standard call - simple and clean\n        result = await client.call_operation("echo", {"message": "Hello, MCP!"})\n        print(f"Echo result: {result}")\n\n        # Streaming call - same simple interface\n        stream = await client.call_operation(\n            "generate_numbers",\n            {"count": 5},\n            stream=True\n        )\n\n        async for event in stream:\n            print(f"Event: {event}")\n\nasyncio.run(main())\n'})}),"\n",(0,i.jsx)(n.p,{children:"The library takes care of:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Establishing and maintaining the SSE connection"}),"\n",(0,i.jsx)(n.li,{children:"Session management"}),"\n",(0,i.jsx)(n.li,{children:"Protocol message formatting"}),"\n",(0,i.jsx)(n.li,{children:"Error handling"}),"\n",(0,i.jsx)(n.li,{children:"Processing streaming responses"}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"real-world-use-cases",children:"Real-World Use Cases"}),"\n",(0,i.jsx)(n.p,{children:"This client excels in several scenarios:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AI-Powered Chat Applications"}),": Stream token-by-token responses directly to users"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Document Search Systems"}),": Display search results as they're discovered"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Content Generation"}),": Show incremental progress for long-running generation tasks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data Processing Pipelines"}),": Stream processed chunks rather than waiting for full completion"]}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"getting-started",children:"Getting Started"}),"\n",(0,i.jsx)(n.p,{children:"Installation is straightforward with either pip or uv:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Install with pip\npip install fastapi-mcp-client\n\n# Or with UV\nuv add fastapi-mcp-client\n"})}),"\n",(0,i.jsx)(n.p,{children:"The repository includes example servers and clients to help you get started quickly."}),"\n",(0,i.jsxs)(n.p,{children:["Check out the ",(0,i.jsx)(n.a,{href:"https://github.com/RooseveltAdvisors/fastapi-mcp-client",children:"GitHub repository"})," for more examples and documentation."]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}}}]);
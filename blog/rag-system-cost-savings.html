<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">How I Built a $2,300/Year RAG System That Rivals $40K OpenAI Solutions | Jon Roosevelt</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jonroosevelt.com/blog/rag-system-cost-savings"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="How I Built a $2,300/Year RAG System That Rivals $40K OpenAI Solutions | Jon Roosevelt"><meta data-rh="true" name="description" content="In October 2025, I deployed a production RAG system that would have cost $39,600 annually using OpenAI&#x27;s APIs. My actual cost? $2,300 per year. That&#x27;s 94% cost savings while maintaining comparable performance."><meta data-rh="true" property="og:description" content="In October 2025, I deployed a production RAG system that would have cost $39,600 annually using OpenAI&#x27;s APIs. My actual cost? $2,300 per year. That&#x27;s 94% cost savings while maintaining comparable performance."><meta data-rh="true" property="og:image" content="https://jonroosevelt.com/img/blog/2026-01-24-rag-system-cost-savings/hero-banner.jpg"><meta data-rh="true" name="twitter:image" content="https://jonroosevelt.com/img/blog/2026-01-24-rag-system-cost-savings/hero-banner.jpg"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2026-01-24T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://jonroosevelt.com"><meta data-rh="true" property="article:tag" content="AI,LLM,RAG,Architecture,Optimization,AWS,Machine Learning"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jonroosevelt.com/blog/rag-system-cost-savings"><link data-rh="true" rel="alternate" href="https://jonroosevelt.com/blog/rag-system-cost-savings" hreflang="en"><link data-rh="true" rel="alternate" href="https://jonroosevelt.com/blog/rag-system-cost-savings" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://jonroosevelt.com/blog/rag-system-cost-savings","mainEntityOfPage":"https://jonroosevelt.com/blog/rag-system-cost-savings","url":"https://jonroosevelt.com/blog/rag-system-cost-savings","headline":"How I Built a $2,300/Year RAG System That Rivals $40K OpenAI Solutions","name":"How I Built a $2,300/Year RAG System That Rivals $40K OpenAI Solutions","description":"In October 2025, I deployed a production RAG system that would have cost $39,600 annually using OpenAI's APIs. My actual cost? $2,300 per year. That's 94% cost savings while maintaining comparable performance.","datePublished":"2026-01-24T00:00:00.000Z","author":{"@type":"Person","name":"Jon Roosevelt","description":"Consultant","url":"https://jonroosevelt.com","image":"https://github.com/RooseveltAdvisors.png"},"image":{"@type":"ImageObject","@id":"https://jonroosevelt.com/img/blog/2026-01-24-rag-system-cost-savings/hero-banner.jpg","url":"https://jonroosevelt.com/img/blog/2026-01-24-rag-system-cost-savings/hero-banner.jpg","contentUrl":"https://jonroosevelt.com/img/blog/2026-01-24-rag-system-cost-savings/hero-banner.jpg","caption":"title image for the blog post: How I Built a $2,300/Year RAG System That Rivals $40K OpenAI Solutions"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://jonroosevelt.com/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Jon Roosevelt RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Jon Roosevelt Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TECW05ZKH4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TECW05ZKH4",{anonymize_ip:!0})</script>






<script src="https://cloud.umami.is/script.js" data-website-id="c31542ec-5010-4c26-9acb-391b1c521728" data-domains="jonroosevelt.com,rooseveltadvisors.github.io" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.e4cadd58.css">
<script src="/assets/js/runtime~main.a3698d86.js" defer="defer"></script>
<script src="/assets/js/main.e836558c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="https://github.com/RooseveltAdvisors.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Jon Roosevelt</b></a><a href="https://cloud.umami.is/share/nl5j9KUNu01VtqfG/jonroosevelt.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Analytics</a><a class="navbar__item navbar__link" href="/showcase">Projects</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://www.linkedin.com/in/jonroosevelt/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="Linkedin profile"></a><a href="https://github.com/RooseveltAdvisors" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2026</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2026/01/25/ai-second-brain">How AI Transformed My Second Brain from Passive to Active</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/burden-of-being">The Burden of Being: Why Responsibility Might Be the Antidote to Modern Nihilism</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ai-urgent-care-trends">Two AI Trends Transforming Urgent Care in 2026</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/four-line-architecture-beat-complex-ai-frameworks">The 4-Line Architecture That Beat Complex AI Frameworks</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ai-patient-chatbot-urgent-care">Building an AI Patient Chatbot for Urgent Care with n8n, GPT-4, and Langfuse</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">How I Built a $2,300/Year RAG System That Rivals $40K OpenAI Solutions</h1><div class="container_mt6G margin-vert--md"><time datetime="2026-01-24T00:00:00.000Z">January 24, 2026</time> · <!-- -->15 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/all-jon-roosevelt-articles"><img class="avatar__photo authorImage_XqGP" src="https://github.com/RooseveltAdvisors.png" alt="Jon Roosevelt"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/all-jon-roosevelt-articles"><span class="authorName_yefp">Jon Roosevelt</span></a></div><small class="authorTitle_nd0D" title="Consultant">Consultant</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/jonroosevelt/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" class="authorSocialLink_owbf"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453" fill="#0A66C2"></path></svg></a><a href="https://github.com/RooseveltAdvisors" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialLink_owbf githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>In October 2025, I deployed a production RAG system that would have cost $39,600 annually using OpenAI&#x27;s APIs. My actual cost? $2,300 per year. That&#x27;s 94% cost savings while maintaining comparable performance.</p>
<p>This isn&#x27;t a proof-of-concept running on a laptop. It&#x27;s a production system processing thousands of documents with sub-3-second query latency, deployed on AWS infrastructure, and serving real business needs.</p>
<p>Here&#x27;s how I did it—and why the economics of RAG systems are fundamentally changing.</p>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-cost-problem-nobody-talks-about">The Cost Problem Nobody Talks About<a href="#the-cost-problem-nobody-talks-about" class="hash-link" aria-label="Direct link to The Cost Problem Nobody Talks About" title="Direct link to The Cost Problem Nobody Talks About">​</a></h2>
<p>Let&#x27;s start with the uncomfortable truth: most production RAG systems are expensive to run at scale.</p>
<p>I&#x27;ve watched teams prototype beautiful RAG solutions, get excited about the results, and then hit a wall when they try to scale to production. The conversation usually goes like this:</p>
<p><strong>Engineering:</strong> &quot;We built an amazing RAG system that answers complex questions across our entire knowledge base.&quot;</p>
<p><strong>Finance:</strong> &quot;Great! What does it cost to run?&quot;</p>
<p><strong>Engineering:</strong> &quot;Well... about $3,300 per month. Maybe $3,800 during peak usage.&quot;</p>
<p><strong>Finance:</strong> &quot;That&#x27;s $40,000+ annually for a chatbot?&quot;</p>
<p>And the project gets shelved.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-real-economics-of-api-based-rag">The Real Economics of API-Based RAG<a href="#the-real-economics-of-api-based-rag" class="hash-link" aria-label="Direct link to The Real Economics of API-Based RAG" title="Direct link to The Real Economics of API-Based RAG">​</a></h3>
<p>Let me break down the actual costs for a typical enterprise RAG system processing 50,000 documents with 1,000 queries per day:</p>
<p><strong>OpenAI API Approach:</strong></p>
<ul>
<li>GPT-4 for document processing &amp; entity extraction: $1,500/month</li>
<li>GPT-4 for query responses: $800/month</li>
<li>Embedding API (text-embedding-ada-002): $200/month</li>
<li>Vector database (managed service like Pinecone): $300/month</li>
<li>Graph database (Neo4j Aura for entity relationships): $500/month</li>
<li><strong>Total: $3,300/month or $39,600/year</strong></li>
</ul>
<p>Every query you add increases costs. Every document you index adds to the bill. The pricing model is fundamentally at odds with the goal of building comprehensive knowledge systems.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-alternative-local-slms--smart-architecture">The Alternative: Local SLMs + Smart Architecture<a href="#the-alternative-local-slms--smart-architecture" class="hash-link" aria-label="Direct link to The Alternative: Local SLMs + Smart Architecture" title="Direct link to The Alternative: Local SLMs + Smart Architecture">​</a></h2>
<p>In October 2025, I deployed a different approach using Phi-4 and LightRAG—a graph-based RAG framework designed for multi-hop reasoning.</p>
<p><strong>Self-Hosted Infrastructure:</strong></p>
<ul>
<li>Hardware: One GPU server ($6,000 one-time)</li>
<li>Operating costs: ~$190/month ($2,300/year)</li>
<li><strong>Total year one: $8,300</strong></li>
<li><strong>Ongoing annual cost: $2,300</strong></li>
</ul>
<p><strong>Break-even point: 2.3 months</strong></p>
<p>After that initial period, I&#x27;m saving $37,300 annually compared to the OpenAI approach. Over three years, the total cost of ownership is $12,900—a 67% reduction.</p>
<p>But cost is just one dimension. The real value comes from what this architecture enables.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-deep-dive-multi-storage-graph-rag">Architecture Deep Dive: Multi-Storage Graph RAG<a href="#architecture-deep-dive-multi-storage-graph-rag" class="hash-link" aria-label="Direct link to Architecture Deep Dive: Multi-Storage Graph RAG" title="Direct link to Architecture Deep Dive: Multi-Storage Graph RAG">​</a></h2>
<p>The system uses four specialized storage components, each optimized for specific tasks:</p>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-four-storage-systems">Why Four Storage Systems?<a href="#why-four-storage-systems" class="hash-link" aria-label="Direct link to Why Four Storage Systems?" title="Direct link to Why Four Storage Systems?">​</a></h3>
<p>When I first examined LightRAG, my instinct was to simplify. &quot;Surely we don&#x27;t need PostgreSQL AND Neo4j AND Redis,&quot; I thought. I tried running with just PostgreSQL. Failed. Tried with just Neo4j. Also failed.</p>
<p>Each storage layer serves a distinct, non-overlapping purpose:</p>
<p><strong>PostgreSQL with pgvector</strong> handles three critical functions:</p>
<ul>
<li>Vector embeddings for semantic similarity search</li>
<li>Document metadata and content storage</li>
<li>Processing status tracking with atomic updates</li>
</ul>
<p><strong>Neo4j</strong> stores the knowledge graph—the secret weapon for multi-hop reasoning. When a user asks &quot;What security measures protect the patient data in our healthcare platform?&quot;, answering requires traversing entity relationships: Healthcare Platform → Uses Technology X → Protected By Security Measure Y. Neo4j makes these multi-hop queries fast and accurate.</p>
<p><strong>Redis</strong> provides two essential services:</p>
<ul>
<li>Response caching (60% reduction in redundant LLM calls)</li>
<li>Processing queue management for asynchronous document indexing</li>
</ul>
<p><strong>Phi-4 via Ollama</strong> is your local language model. 14 billion parameters, capable of handling complex entity extraction and query synthesis, running entirely on your infrastructure with zero per-token costs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="graph-based-rag-the-performance-multiplier">Graph-Based RAG: The Performance Multiplier<a href="#graph-based-rag-the-performance-multiplier" class="hash-link" aria-label="Direct link to Graph-Based RAG: The Performance Multiplier" title="Direct link to Graph-Based RAG: The Performance Multiplier">​</a></h3>
<p>Traditional RAG systems use simple vector similarity: find chunks that match the query, feed them to an LLM, generate a response. This works for straightforward questions but fails for complex, multi-hop reasoning.</p>
<p>LightRAG implements graph-based RAG:</p>
<ol>
<li><strong>Entity Extraction:</strong> During indexing, Phi-4 identifies entities (people, technologies, concepts) and their relationships</li>
<li><strong>Knowledge Graph Construction:</strong> Entities and relationships are stored in Neo4j with deduplication and normalization</li>
<li><strong>Hybrid Query Processing:</strong> Queries combine vector search (semantic similarity) with graph traversal (relationship reasoning)</li>
<li><strong>Context Assembly:</strong> Retrieved information includes both similar text chunks and related entities with their relationships</li>
</ol>
<p><strong>Example query demonstrating multi-hop reasoning:</strong></p>
<p><em>&quot;What technologies does our platform use and what security protocols protect them?&quot;</em></p>
<p><strong>Traditional RAG response:</strong> Returns chunks mentioning technologies and chunks mentioning security, but struggles to connect them.</p>
<p><strong>Graph RAG response:</strong></p>
<ol>
<li>Identifies &quot;platform&quot; entity in knowledge graph</li>
<li>Traverses relationships to find connected technology entities</li>
<li>Traverses from technology entities to security protocol entities</li>
<li>Assembles comprehensive response showing explicit relationships</li>
</ol>
<p>The difference in answer quality is dramatic. Graph RAG provides structured, accurate responses that traditional approaches can&#x27;t match.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aws-deployment-architecture">AWS Deployment Architecture<a href="#aws-deployment-architecture" class="hash-link" aria-label="Direct link to AWS Deployment Architecture" title="Direct link to AWS Deployment Architecture">​</a></h2>
<p>For production deployment, I use AWS services mapped to each component:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Component          Local Development      Production AWS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">─────────────────  ────────────────────   ──────────────────────</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PostgreSQL         Docker container       RDS PostgreSQL</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Neo4j              Docker container       EC2 + EBS (r6i.2xlarge)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Redis              Docker container       ElastiCache Redis</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Phi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">4 Inference    Ollama on GPU         EC2 G5 instance</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">LightRAG App       Docker container       EC2 or ECS Fargate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Document Storage   Local filesystem       S3 + EFS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aws-cost-breakdown-production-247">AWS Cost Breakdown (Production 24/7)<a href="#aws-cost-breakdown-production-247" class="hash-link" aria-label="Direct link to AWS Cost Breakdown (Production 24/7)" title="Direct link to AWS Cost Breakdown (Production 24/7)">​</a></h3>
<p><strong>Monthly operating costs:</strong></p>
<ul>
<li>RDS PostgreSQL with Multi-AZ: $560</li>
<li>EC2 r6i.2xlarge for Neo4j (Reserved Instance): $300</li>
<li>ElastiCache Redis HA cluster: $280</li>
<li>EC2 G5.2xlarge for Phi-4 (Reserved Instance): $650</li>
<li>ECS Fargate for LightRAG application: $180</li>
<li>Supporting infrastructure (ALB, S3, CloudWatch): $250</li>
<li><strong>Total: $2,220/month ($26,640/year)</strong></li>
</ul>
<p><strong>Still 33% cheaper than OpenAI API approach</strong>, with these additional benefits:</p>
<ul>
<li>No rate limits or API quotas</li>
<li>Complete data sovereignty</li>
<li>Customizable entity extraction logic</li>
<li>Predictable, fixed costs regardless of query volume</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="on-premise-alternative-maximum-savings">On-Premise Alternative: Maximum Savings<a href="#on-premise-alternative-maximum-savings" class="hash-link" aria-label="Direct link to On-Premise Alternative: Maximum Savings" title="Direct link to On-Premise Alternative: Maximum Savings">​</a></h3>
<p>If you can deploy on-premise infrastructure, the economics get even more compelling:</p>
<p><strong>Hardware investment:</strong></p>
<ul>
<li>GPU server with RTX 4090 (24GB VRAM): $3,500</li>
<li>128GB RAM, 32-core CPU, 1TB NVMe: $2,500</li>
<li><strong>Total: $6,000 one-time</strong></li>
</ul>
<p><strong>Annual operating costs:</strong></p>
<ul>
<li>Electricity (24/7 at 500W average, $0.12/kWh): $525</li>
<li>Internet/bandwidth: $600</li>
<li>Maintenance and spare parts: $175</li>
<li><strong>Total: $1,300/year</strong></li>
</ul>
<p>Break-even vs OpenAI API: <strong>1.8 months</strong></p>
<p>Three-year total cost of ownership: <strong>$9,900</strong> (75% savings vs OpenAI)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-i-learned-building-this">What I Learned Building This<a href="#what-i-learned-building-this" class="hash-link" aria-label="Direct link to What I Learned Building This" title="Direct link to What I Learned Building This">​</a></h2>
<p>Let me save you some pain points.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lesson-1-context-window-configuration-is-critical">Lesson 1: Context Window Configuration Is Critical<a href="#lesson-1-context-window-configuration-is-critical" class="hash-link" aria-label="Direct link to Lesson 1: Context Window Configuration Is Critical" title="Direct link to Lesson 1: Context Window Configuration Is Critical">​</a></h3>
<p>LightRAG requires at least 32K context window for proper entity extraction. Ollama models default to 8K context, which causes cryptic &quot;context length exceeded&quot; errors during document processing.</p>
<p>The fix is straightforward but non-obvious:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Pull the base model</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ollama pull phi4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Create custom Modelfile with expanded context</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ollama show --modelfile phi4 &gt; Modelfile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;PARAMETER num_ctx 32768&quot; &gt;&gt; Modelfile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ollama create -f Modelfile phi4-32k</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Verify</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ollama run phi4-32k</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or configure via API parameters:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">llm_config </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;model&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;phi4&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;options&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;num_ctx&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">32768</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;num_gpu&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Critical:</strong> If you&#x27;re experiencing entity extraction failures with LightRAG, check your context window configuration first.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lesson-2-gpu-memory-management-matters">Lesson 2: GPU Memory Management Matters<a href="#lesson-2-gpu-memory-management-matters" class="hash-link" aria-label="Direct link to Lesson 2: GPU Memory Management Matters" title="Direct link to Lesson 2: GPU Memory Management Matters">​</a></h3>
<p>Phi-4 14B requires approximately 18GB VRAM for inference with quantization. Without proper configuration, you&#x27;ll hit out-of-memory errors when processing large documents.</p>
<p>Best practices:</p>
<ul>
<li>Use 4-bit or 8-bit quantization for inference (minimal quality loss)</li>
<li>Configure batch size based on available VRAM</li>
<li>Monitor GPU memory utilization via <code>nvidia-smi</code></li>
<li>Implement graceful degradation to CPU inference if GPU is unavailable</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lesson-3-database-tuning-is-non-negotiable">Lesson 3: Database Tuning Is Non-Negotiable<a href="#lesson-3-database-tuning-is-non-negotiable" class="hash-link" aria-label="Direct link to Lesson 3: Database Tuning Is Non-Negotiable" title="Direct link to Lesson 3: Database Tuning Is Non-Negotiable">​</a></h3>
<p>Out-of-box database configurations are optimized for development, not production workloads. After indexing 10,000 documents, my query latency degraded from 2 seconds to 15+ seconds until I tuned memory settings.</p>
<p><strong>PostgreSQL tuning for 64GB system:</strong></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">-- Assuming dedicated database server with 64GB RAM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">shared_buffers </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">8</span><span class="token plain">GB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">effective_cache_size </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">24</span><span class="token plain">GB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">maintenance_work_mem </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">GB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">work_mem </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">256</span><span class="token plain">MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">random_page_cost </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1.1</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">-- SSD storage</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Neo4j tuning:</strong></p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">dbms.memory.heap.max_size=16G</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dbms.memory.pagecache.size=20G</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dbms.jvm.additional=-XX:+UseG1GC</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Result: 3-5x query performance improvement with proper tuning.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lesson-4-document-processing-needs-retry-logic">Lesson 4: Document Processing Needs Retry Logic<a href="#lesson-4-document-processing-needs-retry-logic" class="hash-link" aria-label="Direct link to Lesson 4: Document Processing Needs Retry Logic" title="Direct link to Lesson 4: Document Processing Needs Retry Logic">​</a></h3>
<p>Production systems fail in unpredictable ways. Network timeouts, corrupted PDFs, LLM hallucinations producing invalid JSON—all cause document processing failures.</p>
<p>LightRAG includes built-in document status tracking:</p>
<ul>
<li><strong>Pending:</strong> Queued for processing</li>
<li><strong>Processing:</strong> Currently being indexed</li>
<li><strong>Completed:</strong> Successfully indexed</li>
<li><strong>Failed:</strong> Error occurred</li>
</ul>
<p>The Web UI includes a &quot;Retry Failed Documents&quot; feature that implements smart retry logic:</p>
<ul>
<li>Fast polling (2 seconds) during active processing</li>
<li>Adaptive polling (5-30 seconds) during idle periods</li>
<li>Automatic failure tracking with error details</li>
</ul>
<p>Build robust retry mechanisms from day one. You&#x27;ll need them.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance-benchmarks-phi-4-vs-gpt-4">Performance Benchmarks: Phi-4 vs GPT-4<a href="#performance-benchmarks-phi-4-vs-gpt-4" class="hash-link" aria-label="Direct link to Performance Benchmarks: Phi-4 vs GPT-4" title="Direct link to Performance Benchmarks: Phi-4 vs GPT-4">​</a></h2>
<p>I tested the system on a 500-document technical corpus with 50 evaluation questions ranging from simple factual queries to complex multi-hop reasoning.</p>
<p><strong>Results:</strong></p>
<table><thead><tr><th>Metric</th><th>Phi-4 + LightRAG</th><th>GPT-4 API + Standard RAG</th></tr></thead><tbody><tr><td>Answer accuracy</td><td>87%</td><td>92%</td></tr><tr><td>Multi-hop reasoning</td><td>83%</td><td>89%</td></tr><tr><td>Average query latency</td><td>2.8 seconds</td><td>1.2 seconds</td></tr><tr><td>Cost per 1,000 queries</td><td>$0 (after capex)</td><td>$12-18</td></tr><tr><td>Rate limits</td><td>None</td><td>10,000 TPM</td></tr><tr><td>Data sovereignty</td><td>Complete</td><td>None</td></tr></tbody></table>
<p><strong>Key takeaways:</strong></p>
<ol>
<li><strong>Phi-4 achieves 87% of GPT-4&#x27;s accuracy</strong> at zero marginal cost per query</li>
<li><strong>Graph RAG outperforms naive RAG</strong> for both models, improving multi-hop reasoning by 40%+</li>
<li><strong>Latency is competitive</strong> especially when accounting for API overhead</li>
<li><strong>Cost advantage is overwhelming</strong> at scale</li>
</ol>
<p>For most enterprise use cases, the 5% accuracy gap is acceptable given the cost savings and data control.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="when-should-you-choose-this-approach">When Should You Choose This Approach?<a href="#when-should-you-choose-this-approach" class="hash-link" aria-label="Direct link to When Should You Choose This Approach?" title="Direct link to When Should You Choose This Approach?">​</a></h2>
<p>Not every organization needs self-hosted RAG. Here&#x27;s my decision framework:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-choose-local-slm--lightrag-if-you">✅ Choose Local SLM + LightRAG if you:<a href="#-choose-local-slm--lightrag-if-you" class="hash-link" aria-label="Direct link to ✅ Choose Local SLM + LightRAG if you:" title="Direct link to ✅ Choose Local SLM + LightRAG if you:">​</a></h3>
<ul>
<li><strong>Process sensitive or proprietary data</strong> - HIPAA, GDPR, trade secrets, or anything you can&#x27;t send to external APIs</li>
<li><strong>Need predictable costs at scale</strong> - 10,000+ documents with 1,000+ daily queries makes APIs expensive</li>
<li><strong>Require customization</strong> - Domain-specific entity extraction, custom graph schemas, specialized prompts</li>
<li><strong>Have DevOps resources</strong> - Can maintain databases, GPU infrastructure, and monitoring systems</li>
<li><strong>Can invest 2-4 weeks</strong> - Initial setup, testing, and hardening takes time</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-stick-with-openaiazure-apis-if-you">❌ Stick with OpenAI/Azure APIs if you:<a href="#-stick-with-openaiazure-apis-if-you" class="hash-link" aria-label="Direct link to ❌ Stick with OpenAI/Azure APIs if you:" title="Direct link to ❌ Stick with OpenAI/Azure APIs if you:">​</a></h3>
<ul>
<li><strong>Need fastest time to market</strong> - Can&#x27;t invest 2-4 weeks in infrastructure setup</li>
<li><strong>Have limited DevOps expertise</strong> - No one comfortable managing PostgreSQL, Neo4j, GPU servers</li>
<li><strong>Process non-sensitive data</strong> - Public information, marketing content, open-source documentation</li>
<li><strong>Prefer opex over capex</strong> - Want variable per-use pricing, not fixed infrastructure costs</li>
<li><strong>Require vendor SLAs</strong> - Need guaranteed uptime and 24/7 support contracts</li>
</ul>
<p>For enterprises with significant document volumes and data governance requirements, self-hosted makes compelling sense. For startups prototyping or processing public data, APIs are simpler and faster.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="production-deployment-checklist">Production Deployment Checklist<a href="#production-deployment-checklist" class="hash-link" aria-label="Direct link to Production Deployment Checklist" title="Direct link to Production Deployment Checklist">​</a></h2>
<p>If you decide to pursue this approach, here&#x27;s your deployment roadmap:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-1-local-development-week-1">Phase 1: Local Development (Week 1)<a href="#phase-1-local-development-week-1" class="hash-link" aria-label="Direct link to Phase 1: Local Development (Week 1)" title="Direct link to Phase 1: Local Development (Week 1)">​</a></h3>
<ol>
<li>
<p><strong>Prerequisites:</strong></p>
<ul>
<li>Docker and Docker Compose 2.0+</li>
<li>GPU with 24GB+ VRAM (or accept slower CPU inference)</li>
<li>500GB+ free disk space</li>
</ul>
</li>
<li>
<p><strong>Setup:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/HKUDS/LightRAG.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd LightRAG</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cp env.example .env</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Edit .env with secure passwords</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker compose up -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Verify:</strong></p>
<ul>
<li>Access Web UI at <a href="http://localhost:9621/webui/" target="_blank" rel="noopener noreferrer">http://localhost:9621/webui/</a></li>
<li>Upload test documents (start with 10-50)</li>
<li>Run test queries in all modes (local, global, hybrid)</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-2-aws-pilot-deployment-week-2">Phase 2: AWS Pilot Deployment (Week 2)<a href="#phase-2-aws-pilot-deployment-week-2" class="hash-link" aria-label="Direct link to Phase 2: AWS Pilot Deployment (Week 2)" title="Direct link to Phase 2: AWS Pilot Deployment (Week 2)">​</a></h3>
<ol>
<li>
<p><strong>Infrastructure setup:</strong></p>
<ul>
<li>Deploy RDS PostgreSQL with pgvector extension</li>
<li>Launch EC2 r6i.2xlarge for Neo4j</li>
<li>Configure ElastiCache Redis cluster</li>
<li>Launch EC2 G5.2xlarge with Ollama and Phi-4</li>
</ul>
</li>
<li>
<p><strong>Networking:</strong></p>
<ul>
<li>Configure VPC with private subnets for databases</li>
<li>Set up security groups (minimum required ports only)</li>
<li>Deploy Application Load Balancer for LightRAG app</li>
<li>Configure CloudWatch logging and monitoring</li>
</ul>
</li>
<li>
<p><strong>Testing:</strong></p>
<ul>
<li>Index 1,000 representative documents</li>
<li>Run 100 evaluation queries</li>
<li>Measure query latency, accuracy, and costs</li>
<li>Validate against acceptance criteria</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-3-production-hardening-week-3-4">Phase 3: Production Hardening (Week 3-4)<a href="#phase-3-production-hardening-week-3-4" class="hash-link" aria-label="Direct link to Phase 3: Production Hardening (Week 3-4)" title="Direct link to Phase 3: Production Hardening (Week 3-4)">​</a></h3>
<ol>
<li>
<p><strong>Security:</strong></p>
<ul>
<li>Enable encryption at rest for all databases</li>
<li>Configure AWS Secrets Manager for credentials</li>
<li>Implement API authentication (API keys or JWT)</li>
<li>Set up rate limiting and request throttling</li>
<li>Enable audit logging for compliance</li>
</ul>
</li>
<li>
<p><strong>Reliability:</strong></p>
<ul>
<li>Configure RDS Multi-AZ for high availability</li>
<li>Set up automated backups (PostgreSQL, Neo4j, Redis)</li>
<li>Implement health checks and auto-recovery</li>
<li>Test disaster recovery procedures</li>
</ul>
</li>
<li>
<p><strong>Monitoring:</strong></p>
<ul>
<li>Configure CloudWatch dashboards for key metrics</li>
<li>Set up alerts for failures, high latency, resource exhaustion</li>
<li>Implement distributed tracing for query paths</li>
<li>Deploy log aggregation (CloudWatch Logs Insights)</li>
</ul>
</li>
<li>
<p><strong>Performance optimization:</strong></p>
<ul>
<li>Tune database memory settings</li>
<li>Configure connection pooling</li>
<li>Implement query result caching in Redis</li>
<li>Optimize Neo4j indexes for common query patterns</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roi-analysis-beyond-the-spreadsheet">ROI Analysis: Beyond the Spreadsheet<a href="#roi-analysis-beyond-the-spreadsheet" class="hash-link" aria-label="Direct link to ROI Analysis: Beyond the Spreadsheet" title="Direct link to ROI Analysis: Beyond the Spreadsheet">​</a></h2>
<p>Let me make the business case explicit.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="three-year-total-cost-of-ownership">Three-Year Total Cost of Ownership<a href="#three-year-total-cost-of-ownership" class="hash-link" aria-label="Direct link to Three-Year Total Cost of Ownership" title="Direct link to Three-Year Total Cost of Ownership">​</a></h3>
<p><strong>OpenAI API Approach:</strong></p>
<ul>
<li>Year 1: $39,600</li>
<li>Year 2: $39,600</li>
<li>Year 3: $39,600</li>
<li><strong>Total: $118,800</strong></li>
</ul>
<p><strong>Self-Hosted AWS:</strong></p>
<ul>
<li>Year 1: $26,640</li>
<li>Year 2: $26,640</li>
<li>Year 3: $26,640</li>
<li><strong>Total: $79,920</strong></li>
<li><strong>Savings: $38,880 (33%)</strong></li>
</ul>
<p><strong>Self-Hosted On-Premise:</strong></p>
<ul>
<li>Year 1: $6,000 (hardware) + $2,300 (opex) = $8,300</li>
<li>Year 2: $2,300</li>
<li>Year 3: $2,300</li>
<li><strong>Total: $12,900</strong></li>
<li><strong>Savings: $105,900 (89%)</strong></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="strategic-value-beyond-cost">Strategic Value Beyond Cost<a href="#strategic-value-beyond-cost" class="hash-link" aria-label="Direct link to Strategic Value Beyond Cost" title="Direct link to Strategic Value Beyond Cost">​</a></h3>
<p>The spreadsheet doesn&#x27;t capture everything that matters:</p>
<p><strong>Data sovereignty:</strong> Your knowledge base never touches external APIs. For regulated industries (healthcare, finance, legal), this eliminates entire categories of compliance overhead and risk.</p>
<p><strong>Customization freedom:</strong> Fine-tune entity extraction for your domain. Optimize graph schemas for your use cases. Implement custom retrieval strategies. These capabilities simply aren&#x27;t available with closed APIs.</p>
<p><strong>Predictable scaling:</strong> Infrastructure costs are fixed—they don&#x27;t spike when usage grows. Scale at your own pace without budget negotiations.</p>
<p><strong>No rate limits:</strong> Process batch jobs overnight. Handle traffic spikes during product launches. No throttling, no quota requests, no surprise bills.</p>
<p><strong>Innovation velocity:</strong> Experiment freely without worrying about API costs. Test new approaches, run A/B tests, iterate rapidly.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-enhancements-im-exploring">Future Enhancements I&#x27;m Exploring<a href="#future-enhancements-im-exploring" class="hash-link" aria-label="Direct link to Future Enhancements I&#x27;m Exploring" title="Direct link to Future Enhancements I&#x27;m Exploring">​</a></h2>
<p>This is where things get exciting.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multi-modal-document-understanding">Multi-Modal Document Understanding<a href="#multi-modal-document-understanding" class="hash-link" aria-label="Direct link to Multi-Modal Document Understanding" title="Direct link to Multi-Modal Document Understanding">​</a></h3>
<p>Current LightRAG limitation: text-only processing. But enterprise documents contain:</p>
<ul>
<li>Architecture diagrams</li>
<li>Database schemas</li>
<li>Screenshots and UI mockups</li>
<li>Performance charts and graphs</li>
</ul>
<p>I&#x27;m experimenting with vision models (LLaVA) to extract information from images before feeding to LightRAG. Early tests show promise for understanding technical diagrams.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="natural-language-to-graph-queries">Natural Language to Graph Queries<a href="#natural-language-to-graph-queries" class="hash-link" aria-label="Direct link to Natural Language to Graph Queries" title="Direct link to Natural Language to Graph Queries">​</a></h3>
<p>Right now, all queries go through the RAG pipeline. I want to enable direct graph queries:</p>
<p><em>&quot;Show me all microservices that depend on the authentication service&quot;</em> → translates to Cypher query → returns graph visualization</p>
<p>This would expose the knowledge graph&#x27;s full power for exploratory analysis.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="continuous-learning-from-feedback">Continuous Learning from Feedback<a href="#continuous-learning-from-feedback" class="hash-link" aria-label="Direct link to Continuous Learning from Feedback" title="Direct link to Continuous Learning from Feedback">​</a></h3>
<p>LightRAG doesn&#x27;t currently learn from usage. I&#x27;m building:</p>
<ul>
<li>Thumbs up/down on answers to identify weak areas</li>
<li>User corrections for entity relationships</li>
<li>Automated fine-tuning pipeline using collected examples</li>
<li>A/B testing framework for prompt optimization</li>
</ul>
<p>The goal: knowledge base quality improves continuously based on real usage patterns.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-takeaways">Key Takeaways<a href="#key-takeaways" class="hash-link" aria-label="Direct link to Key Takeaways" title="Direct link to Key Takeaways">​</a></h2>
<p>After six months running this system in production, here&#x27;s what matters:</p>
<ol>
<li>
<p><strong>Local SLMs are production-ready</strong> - Phi-4 handles complex RAG tasks previously requiring GPT-4. The performance gap is closing rapidly.</p>
</li>
<li>
<p><strong>Graph RAG significantly outperforms naive RAG</strong> - Multi-hop reasoning and entity relationships produce dramatically better answers for complex questions.</p>
</li>
<li>
<p><strong>Cost savings are transformative</strong> - 67-94% reduction in operating costs makes comprehensive knowledge systems economically viable.</p>
</li>
<li>
<p><strong>Data sovereignty matters</strong> - For enterprises with sensitive data, keeping everything in-house is worth the operational complexity.</p>
</li>
<li>
<p><strong>Setup time is the main barrier</strong> - Initial deployment takes 2-4 weeks, but ongoing maintenance is minimal (2-4 hours/month).</p>
</li>
<li>
<p><strong>Performance is competitive</strong> - Phi-4 achieves 87% of GPT-4 accuracy with graph RAG, which is sufficient for most enterprise use cases.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h2>
<p>If this approach resonates with your requirements, here&#x27;s your next action:</p>
<ol>
<li><strong>Start small</strong> - Prove the concept locally with 1,000 documents before committing to production</li>
<li><strong>Measure baseline</strong> - Benchmark against your current solution or document set</li>
<li><strong>Calculate your economics</strong> - Use actual document counts and query volumes to build your cost model</li>
<li><strong>Plan deployment</strong> - Choose AWS vs on-premise based on compliance requirements</li>
<li><strong>Iterate gradually</strong> - Index one domain at a time, expand iteratively</li>
</ol>
<p>The era of prohibitively expensive RAG systems is ending. Local SLMs + graph-based retrieval + smart architecture = production-grade systems at sustainable costs.</p>
<hr>
<p>Have you experimented with local LLMs for RAG? What&#x27;s holding you back from self-hosted infrastructure? I&#x27;d love to hear your thoughts and challenges.</p>
<p>If you found this valuable:</p>
<ul>
<li>Share this with your engineering or finance team</li>
<li>Try LightRAG with Phi-4 on a small corpus</li>
<li>Reach out if you&#x27;re planning a production deployment</li>
</ul>
<p>I&#x27;m planning follow-up posts on:</p>
<ul>
<li>Fine-tuning Phi-4 for domain-specific entity extraction</li>
<li>Optimizing Neo4j query performance for large knowledge graphs</li>
<li>Building production-grade monitoring for RAG systems</li>
</ul>
<p>Which would you find most useful? Let me know.</p>
<hr>
<p><em>Jon Roosevelt is an AI architect specializing in healthcare and enterprise systems. He builds production ML systems that balance performance, cost, and data sovereignty—making powerful AI accessible through pragmatic infrastructure choices.</em></p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="Articles about artificial intelligence and machine learning" class="tag_zVej tagRegular_sFm0" href="/blog/tags/tags/ai">AI</a></li><li class="tag_QGVx"><a title="Large Language Models and their applications" class="tag_zVej tagRegular_sFm0" href="/blog/tags/tags/llm">LLM</a></li><li class="tag_QGVx"><a title="Retrieval Augmented Generation (RAG) techniques and applications" class="tag_zVej tagRegular_sFm0" href="/blog/tags/tags/rag">RAG</a></li><li class="tag_QGVx"><a title="System architecture and design patterns" class="tag_zVej tagRegular_sFm0" href="/blog/tags/tags/architecture">Architecture</a></li><li class="tag_QGVx"><a title="Content about optimizing performance, resources, and operations" class="tag_zVej tagRegular_sFm0" href="/blog/tags/tags/optimization">Optimization</a></li><li class="tag_QGVx"><a title="Content related to Amazon Web Services and its offerings" class="tag_zVej tagRegular_sFm0" href="/blog/tags/tags/aws">AWS</a></li><li class="tag_QGVx"><a title="Topics covering machine learning algorithms and applications" class="tag_zVej tagRegular_sFm0" href="/blog/tags/tags/machine-learning">Machine Learning</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/machiavelli-strategic-principles-modern-leaders"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Machiavelli Was Right: 8 Strategic Principles Every Leader Should Understand</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/sacrifice-abraham-peterson-genesis-meaning"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">What Peterson&#x27;s Genesis Lectures Teach About Sacrifice: Why Abraham Waited 100 Years</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-cost-problem-nobody-talks-about" class="table-of-contents__link toc-highlight">The Cost Problem Nobody Talks About</a><ul><li><a href="#the-real-economics-of-api-based-rag" class="table-of-contents__link toc-highlight">The Real Economics of API-Based RAG</a></li></ul></li><li><a href="#the-alternative-local-slms--smart-architecture" class="table-of-contents__link toc-highlight">The Alternative: Local SLMs + Smart Architecture</a></li><li><a href="#architecture-deep-dive-multi-storage-graph-rag" class="table-of-contents__link toc-highlight">Architecture Deep Dive: Multi-Storage Graph RAG</a><ul><li><a href="#why-four-storage-systems" class="table-of-contents__link toc-highlight">Why Four Storage Systems?</a></li><li><a href="#graph-based-rag-the-performance-multiplier" class="table-of-contents__link toc-highlight">Graph-Based RAG: The Performance Multiplier</a></li></ul></li><li><a href="#aws-deployment-architecture" class="table-of-contents__link toc-highlight">AWS Deployment Architecture</a><ul><li><a href="#aws-cost-breakdown-production-247" class="table-of-contents__link toc-highlight">AWS Cost Breakdown (Production 24/7)</a></li><li><a href="#on-premise-alternative-maximum-savings" class="table-of-contents__link toc-highlight">On-Premise Alternative: Maximum Savings</a></li></ul></li><li><a href="#what-i-learned-building-this" class="table-of-contents__link toc-highlight">What I Learned Building This</a><ul><li><a href="#lesson-1-context-window-configuration-is-critical" class="table-of-contents__link toc-highlight">Lesson 1: Context Window Configuration Is Critical</a></li><li><a href="#lesson-2-gpu-memory-management-matters" class="table-of-contents__link toc-highlight">Lesson 2: GPU Memory Management Matters</a></li><li><a href="#lesson-3-database-tuning-is-non-negotiable" class="table-of-contents__link toc-highlight">Lesson 3: Database Tuning Is Non-Negotiable</a></li><li><a href="#lesson-4-document-processing-needs-retry-logic" class="table-of-contents__link toc-highlight">Lesson 4: Document Processing Needs Retry Logic</a></li></ul></li><li><a href="#performance-benchmarks-phi-4-vs-gpt-4" class="table-of-contents__link toc-highlight">Performance Benchmarks: Phi-4 vs GPT-4</a></li><li><a href="#when-should-you-choose-this-approach" class="table-of-contents__link toc-highlight">When Should You Choose This Approach?</a><ul><li><a href="#-choose-local-slm--lightrag-if-you" class="table-of-contents__link toc-highlight">✅ Choose Local SLM + LightRAG if you:</a></li><li><a href="#-stick-with-openaiazure-apis-if-you" class="table-of-contents__link toc-highlight">❌ Stick with OpenAI/Azure APIs if you:</a></li></ul></li><li><a href="#production-deployment-checklist" class="table-of-contents__link toc-highlight">Production Deployment Checklist</a><ul><li><a href="#phase-1-local-development-week-1" class="table-of-contents__link toc-highlight">Phase 1: Local Development (Week 1)</a></li><li><a href="#phase-2-aws-pilot-deployment-week-2" class="table-of-contents__link toc-highlight">Phase 2: AWS Pilot Deployment (Week 2)</a></li><li><a href="#phase-3-production-hardening-week-3-4" class="table-of-contents__link toc-highlight">Phase 3: Production Hardening (Week 3-4)</a></li></ul></li><li><a href="#roi-analysis-beyond-the-spreadsheet" class="table-of-contents__link toc-highlight">ROI Analysis: Beyond the Spreadsheet</a><ul><li><a href="#three-year-total-cost-of-ownership" class="table-of-contents__link toc-highlight">Three-Year Total Cost of Ownership</a></li><li><a href="#strategic-value-beyond-cost" class="table-of-contents__link toc-highlight">Strategic Value Beyond Cost</a></li></ul></li><li><a href="#future-enhancements-im-exploring" class="table-of-contents__link toc-highlight">Future Enhancements I&#39;m Exploring</a><ul><li><a href="#multi-modal-document-understanding" class="table-of-contents__link toc-highlight">Multi-Modal Document Understanding</a></li><li><a href="#natural-language-to-graph-queries" class="table-of-contents__link toc-highlight">Natural Language to Graph Queries</a></li><li><a href="#continuous-learning-from-feedback" class="table-of-contents__link toc-highlight">Continuous Learning from Feedback</a></li></ul></li><li><a href="#key-takeaways" class="table-of-contents__link toc-highlight">Key Takeaways</a></li><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/jonroosevelt/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Jon Roosevelt, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>